<canvas width="600" height="600"></canvas>

<script>
    function desenhaRetangulo(x, y, largura, altura, cor){
        var canvas = document.querySelector('canvas')
        var ctx = canvas.getContext('2d')

        ctx.fillStyle = cor
        ctx.fillRect(x, y, largura, altura)
        ctx.strokeStyle = 'black'
        ctx.strokeRect(x, y, largura, altura)
    }

    function desenhaTexto(texto, x, y){
        var canvas = document.querySelector('canvas')
        var ctx = canvas.getContext('2d')

        ctx.font = '15px Georgia'
        ctx.fillStyle = 'black'
        ctx.fillText(texto, x, y)
    }

    function desenhaBarra(x, y, serie, cor, texto){
        desenhaTexto(texto, x, y - 20)

        var somaAltura = 0
        for(i = 0; i < serie.length; i++){
            var altura = serie[i]
            desenhaRetangulo(x, y + somaAltura, 50, altura, cor[i])
            somaAltura += altura
        }
    }

    var cores = ['blue','green','yellow', 'red'];
    var serie2015 = [50,20,0,30];
    var serie2016 = [65,20,13,2];

    desenhaBarra(50, 50, serie2015, cores, '2015');
    desenhaBarra(250, 50, serie2016, cores, '2016');


</script>